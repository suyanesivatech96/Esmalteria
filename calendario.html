<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendário</title>

    <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
    <link rel="stylesheet" href="calendario.css">
</head>
<body>

<div class="calendar-container">

    <div class="calendar-header">
        <h2 id="current-month"></h2>

        <div class="nav-botoes">
            <button type="button" class="btn-secundario" onclick="window.location.href='../dashboard/dashboard.html'">Sair</button>
            <button id="today-button">Hoje</button>
            <button id="prev-month">&lt;</button>
            <button id="next-month">&gt;</button>
        </div>
    </div>

    <div class="calendar-grid" id="calendar-grid">
        <div class="weekdays"> 
            <span>Dom</span>
            <span>Seg</span>
            <span>Ter</span>
            <span>Qua</span>
            <span>Qui</span>
            <span>Sex</span>
            <span>Sáb</span>
        </div>

        <div class="days" id="days-grid"></div>
    </div>
</div>


<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2 id="modal-title">Agendamentos</h2>

    <div id="modal-body">
        Carregando...
    </div>
  </div>
</div>

<script>
function abrirModal(dia, mes, ano) {

    document.getElementById("modal").style.display = "block";
    document.getElementById("modal-title").innerText =
        "Agendamentos de " + dia + "/" + mes + "/" + ano;

    document.getElementById("modal-body").innerHTML = "Carregando...";

    fetch("buscar_agendamentos.php?dia=" + dia + "&mes=" + mes + "&ano=" + ano)
    .then(response => response.json())
    .then(data => {

        if (data.length === 0) {
            document.getElementById("modal-body").innerHTML =
                "<p>Nenhum agendamento para este dia.</p>";
        } else {
            let html = "";
            data.forEach(item => {
                html += `
                    <div style='padding:10px; border-bottom:1px solid #ddd'>
                        <b>Hora:</b> ${item.hora}<br>
                        <b>Cliente:</b> ${item.cliente}
                    </div>
                `;
            });
            document.getElementById("modal-body").innerHTML = html;
        }
    });
}


document.querySelector(".close").onclick = function() {
    document.getElementById("modal").style.display = "none";
};

window.onclick = function(event) {
  if (event.target == document.getElementById("modal")) {
    document.getElementById("modal").style.display = "none";
  }
};
</script>


<script src="calendario.js"></script>

</body>
</html>
